new Vue({el:"#app",methods:{selectModule(a){let b=this;b.activeModule=b.apiData[a],b.activeAction={actionId:"",actionName:"",title:"",desc:"",route:"",method:"",headers:[],params:[],reqBody:[],response:[]},b.requestForm={headers:{},params:{},data:{}},b.responseBody=null},selectAction(a,b){let c=this;c.requestForm={headers:{},params:{},data:{}},c.responseBody=null,c.activeModule.controllers.forEach((d,e)=>{d.actions.forEach((d,f)=>{e===a&&f===b?(c.activeAction=d,c.activeAction.headers.forEach(a=>{localStorage.getItem("header_"+a.name)&&(a.default=localStorage.getItem("header_"+a.name)),c.requestForm.headers[a.name]=a.default}),c.activeAction.params.forEach(a=>{c.requestForm.params[a.name]=a.default}),c.requestForm.data=c.formatReqBodyToJson(c.activeAction.reqBody),c.requestForm.data&&(c.requestForm.data2=JSON.stringify(c.requestForm.data,null,4),$("#requestDataView").jsonViewer(c.requestForm.data)),c.formatParams(c.activeAction.headers),c.formatParams(c.activeAction.params),c.formatParams(c.activeAction.reqBody),c.formatParams(c.activeAction.response),d.active=!0):d.active=!1})})},formatReqBodyToJson(a){let b=this,c={};return a.forEach(a=>{let d="";switch(a.type){case"integer":d=a.default?a.default:0;break;case"float":d=a.default?a.default:0;break;case"boolean":d=!a.default||a.default;break;case"array":d=a.default?a.default:[];break;case"list":d=b.formatReqBodyToJson(a.children);break;default:}c[a.name]=d}),c},formatParams(a){let b=this;a.forEach((c,d)=>{"list"===c.type&&c.children&&c.children.length&&(b.formatParamChildren(c.name,c.children),a.splice(d+1,0,...c.children))})},formatParamChildren(a,b){let c=this;b.forEach((d,e)=>{d.name=a+"[]."+d.name,d.children&&(c.formatParamChildren(d.name,d.children),b.splice(e+1,0,...d.children))})},setResHeader(a,b,c){this.activeAction.headers[a].default=c.target.value,this.requestForm.headers[b]=c.target.value,localStorage.setItem("header_"+b,c.target.value)},setResParam(a,b,c){this.activeAction.params[a].default=c.target.value,this.requestForm.params[b]=c.target.value},setResBody(a){try{this.requestForm.data=JSON.parse(a.target.value),this.requestForm.data2=JSON.stringify(this.requestForm.data,null,4),$("#requestDataView").jsonViewer(this.requestForm.data)}catch(a){console.log("postData:","\u8BED\u6CD5\u9519\u8BEF")}},sendRequest(){let a=this;if(!a.activeAction.actionId)return;let b=JSON.parse(JSON.stringify(a.requestForm.params)),c=a.formatRoute(a.activeAction.route,b);return-1<c.search(/\{(.+?)\}/g)?void alert("\u8DEF\u7531\u4E2D\u8FD8\u6709\u53D8\u91CF\u672A\u66FF\u6362: "+c):void axios({method:a.activeAction.method,url:c,baseURL:a.baseUrl,headers:a.requestForm.headers,params:a.requestForm.params,data:a.requestForm.data}).then(b=>{200===b.status?(a.responseBody=b.data,$("#responseBodyView").jsonViewer(a.responseBody)):console.log("axios.then",b)}).catch(a=>{console.log("axios.catch",a)})},formatRoute(a,b){var c=a.match(/\{(.+?)\}/g);return c&&c.forEach(c=>{let d=c.slice(1,c.length-1);b.hasOwnProperty(d)&&null!==b[d]&&(a=a.replace(c,b[d]),delete b[d])}),a}},created(){this.baseUrl=baseUrl,this.apiData=apiData,this.activeModule=this.apiData[0]},data:{message:"Hello Vue!",baseUrl:"",apiData:[],activeModule:{moduleId:"",controllers:[]},activeAction:{actionId:"",actionName:"",title:"",desc:"",route:"",method:"",headers:[],params:[],reqBody:[],response:[]},requestForm:{headers:{},params:{},data:{},data2:{}},responseBody:null}});